<!DOCTYPE html>
<script src="../../resources/js-test.js"></script>
<script>
description('When adding focus ring rects, we should avoid adding duplicated rect for continuations');
onload = function() {
  document.body.offsetTop;
  // 6 focus ring rects:
  // - 0: 'SPAN0' part of the span;
  // - 1: div DIV1
  // - 2: anonymous block containing the inline part of DIV1 before DIV2
  // - 3: first line box of div DIV1
  // - 4: div DIV2
  // - 5: first line box of div DIV2
  if (window.testRunner && window.internals)
    shouldBe("internals.outlineRects(document.getElementById('focus')).length", "6");
};
</script>
<div>
  <span id="focus">SPAN0
    <div>DIV1
      <span>SPAN1
        <div>DIV2</div>
      </span>
    </div>
  </span>
</div>
