<p>
    Test that a plugin that causes its Widget to be destroyed during setWindow does not cause a crash.
</p>
<embed id="plugin" type="application/x-webkit-test-netscape" onSetWindow="handleSetWindow()">
<script>
    var plugIn = document.getElementById("plugin");
    var count = 0;

    if (window.testRunner)
        testRunner.dumpAsText();

    function handleSetWindow()
    {
        count++;

        if (count == 2)
            plugIn.style.width = "500px";
        else if (count == 3)
            plugIn.parentNode.removeChild(plugIn);
    }

    handleSetWindow();
</script>
